(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f4be6f60"],{"1da9":function(e,t,o){},"54e2":function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"login"}},[o("el-row",[o("el-col",{attrs:{span:24}},[o("el-input",{attrs:{id:"email",placeholder:"请输入邮箱"},on:{change:e.checkEmail},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}},[o("template",{slot:"prepend"},[e._v("邮箱")])],2)],1)],1),o("el-row",[o("el-col",{attrs:{span:24}},[o("el-input",{attrs:{id:"password",type:"password",placeholder:"请输入密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}},[o("template",{slot:"prepend"},[e._v("密码")])],2)],1)],1),o("p",{staticClass:"flex"},[o("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.$router.push("/signup")}}},[e._v("注册")])],1)],1)},n=[],i=(o("7f7f"),o("cadf"),o("551c"),o("097d"),o("7f43")),a=o.n(i),l={email:"SignIn",data:function(){return{email:"",password:""}},methods:{checkEmail:function(){var e=this.email,t=/.*?@.*?\.com/;if(!t.test(e))return this.$notify.error({title:"输入错误",message:"邮箱格式不正确"}),-1;a()({method:"post",url:"/express_site/similarEmail.action",data:{email:e}}).then(function(){console.log("succeed")}).then(function(){console.log("errorrr"),this.$notify.error({title:"输入错误",message:"邮箱不存在，是否已注册？"})})},login:function(){var e=this;function t(e){if(""===e.value)return this.$notify.error({title:"输入错误",message:"".concat(e.name,"不能为空")}),!1}var o=this.email,s=this.password,n=t({name:"邮箱",value:this.email});if(!n&&(n=t({name:"密码",value:this.password}),!n))return s.length<6?(this.$notify.error({title:"输入错误",message:"密码至少6位"}),this.password="",-1):void a.a.post("/express_site/login.action",{email:o,password:s}).then(function(t){if(null!==t.data.user){var o=t.data;e.$store.commit("setFriends",o.friends),e.$store.commit("setUser",o.user),e.$router.push("/chat"),console.log("login succeed");var s=new WebSocket("ws://localhost:8080/express_site/websocket.action");s.onopen=function(){s.send("opened, hello i am websocket from client")},s.onmessage=function(e){console.log(e.data)},s.onclose=function(e){console.log("evt",e),console.log("WebSocketClosed!")},s.onerror=function(e){console.log("evt",e),console.log("WebSocketError!")}}else e.$notify.error({title:"登录失败",message:"核对用户名密码重新登录"})}).catch(function(e){console.log(e)})}}},r=l,c=(o("8044"),o("2877")),u=Object(c["a"])(r,s,n,!1,null,"58b0569e",null);u.options.__file="SignIn.vue";t["default"]=u.exports},8044:function(e,t,o){"use strict";var s=o("1da9"),n=o.n(s);n.a}}]);